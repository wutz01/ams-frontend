webpackJsonp([4],{Q8vG:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("Xxa5"),s=r.n(a),i=r("exGp"),l=r.n(i),n=r("PJh5"),u=r.n(n),p=r("gyMJ"),c={name:"product-supplier",data:function(){return{rowPerPageItems:[15,25,50,{text:"All",value:-1}],headers:[{text:"ID",align:"left",sortable:!0,value:"id"},{text:"Supplier Name",align:"left",sortable:!0,value:"name"},{text:"Address",align:"left",value:"address"},{text:"Currency",align:"left",value:"currency"},{text:"Status",align:"left",value:"status"},{text:"Created",align:"left",value:"created_at"},{text:"Actions",align:"left",value:"id"}],search:null,input:{name:null,address:null,currency:null},supplierList:[],supplierDialog:{show:!1,selected:null},loading:{create:!1}}},methods:{updateSupplier:function(e){var t=this;return l()(s.a.mark(function r(){return s.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(t.loading.create=!1,t.$refs.createSupplierForm.validate()){r.next=3;break}return r.abrupt("return");case 3:return r.prev=3,t.loading.create=!0,r.next=7,p.a.updateSupplier({supplierId:e,name:t.input.name,address:t.input.address,currency:t.input.currency});case 7:t.displayToast("Supplier has been updated"),t.loadSupplierList(),t.cancelModal(),t.$refs.createSupplierForm.reset(),t.loading.create=!1,r.next=18;break;case 14:r.prev=14,r.t0=r.catch(3),t.loading.create=!1,t.displayToast(t.parseErrorRes(r.t0)||"An error occured when trying to update supplier. Please try again","error");case 18:case"end":return r.stop()}},r,t,[[3,14]])}))()},cancelModal:function(){this.supplierDialog.show=!1,this.input={name:null,address:null,currency:null},this.supplierDialog.selected=null},dateFormat:function(e){return e?u()(e).format(this.timeformat()):""},deleteSupplier:function(e){var t=this;return l()(s.a.mark(function r(){return s.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,p.a.updateSupplier({supplierId:e.id,name:e.name,address:e.address,currency:e.currency,status:"inactive"});case 3:t.displayToast("Successfully deleted Supplier - "+e.name),t.loadSupplierList(),r.next=11;break;case 7:r.prev=7,r.t0=r.catch(0),console.log("e",r.t0),t.displayToast(t.parseErrorRes(r.t0)||"An error occured when trying to delete supplier. Please try again","error");case 11:case"end":return r.stop()}},r,t,[[0,7]])}))()},selectSupplier:function(e){this.input={name:e.name,address:e.address,currency:e.currency},this.supplierDialog.selected=e.id,this.supplierDialog.show=!0},createSupplier:function(){var e=this;return l()(s.a.mark(function t(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.loading.create=!1,e.$refs.createSupplierForm.validate()){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,e.loading.create=!0,t.next=7,p.a.createSupplier(e.input);case 7:e.loadSupplierList(),e.displayToast("Successfully added new supplier","success"),e.supplierDialog.show=!1,e.loading.create=!1,t.next=17;break;case 13:t.prev=13,t.t0=t.catch(3),e.loading.create=!1,e.displayToast(e.parseErrorRes(t.t0)||"An error occured. Please try again","error");case 17:case"end":return t.stop()}},t,e,[[3,13]])}))()},loadSupplierList:function(){var e=this;return l()(s.a.mark(function t(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p.a.loadSupplierList("active");case 3:e.supplierList=t.sent,t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),e.displayToast("An error occured when trying to load your supplier List. Please try again","error");case 9:case"end":return t.stop()}},t,e,[[0,6]])}))()}},components:{},mounted:function(){this.loadSupplierList()}},o=r("XyMi"),d=Object(o.a)(c,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-layout",{attrs:{row:"row",wrap:"wrap"}},[r("v-flex",{attrs:{xs12:"xs12"}},[r("v-text-field",{staticClass:"mb-2",attrs:{"append-icon":"search",label:"Search","single-line":"single-line","hide-details":"hide-details"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),r("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.supplierList,search:e.search,"rows-per-page-items":e.rowPerPageItems},scopedSlots:e._u([{key:"headerCell",fn:function(t){return[r("v-tooltip",{attrs:{bottom:"bottom"}},[r("span",{attrs:{slot:"activator"},slot:"activator"},[e._v(e._s(t.header.text))]),r("span",[e._v(e._s(t.header.text))])])]}},{key:"items",fn:function(t){return[r("tr",{staticClass:"pointer",on:{click:function(r){r.stopPropagation(),e.selectSupplier(t.item)}}},[r("td",[e._v(e._s(t.item.id))]),r("td",[e._v(e._s(t.item.name))]),r("td",[e._v(e._s(t.item.address))]),r("td",[e._v(e._s(t.item.currency))]),r("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.status))]),r("td",{staticClass:"text-xs-left"},[e._v(e._s(e.dateFormat(t.item.created_at)))]),r("td",{staticClass:"text-xs-left"},[r("v-btn",{staticClass:"white--text",attrs:{light:"light",small:"small",color:"red"},nativeOn:{click:function(r){r.stopPropagation(),e.deleteSupplier(t.item)}}},[e._v("Delete")])],1)])]}}])})],1),r("v-dialog",{attrs:{"max-width":"500px",persistent:"persistent"},model:{value:e.supplierDialog.show,callback:function(t){e.$set(e.supplierDialog,"show",t)},expression:"supplierDialog.show"}},[r("v-form",{ref:"createSupplierForm"},[r("v-card",[r("v-card-title",{staticClass:"title"},[e._v(e._s(e.supplierDialog.selected?"Update Supplier":"Add Supplier"))]),r("v-card-text",[r("v-layout",{attrs:{row:"row",wrap:"wrap"}},[r("v-flex",{attrs:{xs12:"xs12"}},[r("v-text-field",{attrs:{light:"light","single-line":"single-line","prepend-icon":"mdi-shape",label:"Supplier Name",rules:[e.inputRules().required],required:"required"},model:{value:e.input.name,callback:function(t){e.$set(e.input,"name",t)},expression:"input.name"}})],1),r("v-flex",{attrs:{xs12:"xs12"}},[r("v-text-field",{attrs:{light:"light",required:"required","single-line":"single-line","prepend-icon":"mdi-map-marker",label:"Address",rules:[e.inputRules().required]},model:{value:e.input.address,callback:function(t){e.$set(e.input,"address",t)},expression:"input.address"}})],1),r("v-flex",{attrs:{xs12:"xs12"}},[r("v-text-field",{attrs:{light:"light",required:"required","single-line":"single-line","prepend-icon":"mdi-currency-usd",label:"Currency",rules:[e.inputRules().required]},model:{value:e.input.currency,callback:function(t){e.$set(e.input,"currency",t)},expression:"input.currency"}})],1)],1)],1),r("v-card-actions",{staticClass:"display-flex justify-end"},[r("v-btn",{attrs:{color:"red",flat:"flat",disabled:e.loading.create},on:{click:function(t){t.stopPropagation(),e.cancelModal(t)}}},[e._v("Close")]),e.supplierDialog.selected?e._e():r("v-btn",{attrs:{medium:"medium",color:"primary",loading:e.loading.create},on:{click:function(t){t.stopPropagation(),e.createSupplier(t)}}},[e._v("Add Supplier")]),e.supplierDialog.selected?r("v-btn",{attrs:{medium:"medium",color:"primary",loading:e.loading.create},on:{click:function(t){t.stopPropagation(),e.updateSupplier(e.supplierDialog.selected)}}},[e._v("Update Supplier")]):e._e()],1)],1)],1)],1),r("v-btn",{attrs:{fab:"fab",bottom:"bottom",right:"right",color:"green",dark:"dark",fixed:"fixed"},on:{click:function(t){t.stopPropagation(),e.supplierDialog.show=!0}}},[r("v-icon",[e._v("add")])],1)],1)},[],!1,null,null,null);t.default=d.exports}});
//# sourceMappingURL=4.8cfcc8f62eaabeb83a6f.js.map