webpackJsonp([6],{UWpV:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("Xxa5"),s=r.n(a),i=r("exGp"),n=r.n(i),l=r("PJh5"),o=r.n(l),c=r("gyMJ"),u={name:"masterlist-brethren",data:function(){return{rowPerPageItems:[15,25,50,{text:"All",value:-1}],headers:[{text:"ID",align:"left",sortable:!0,value:"churchId"},{text:"Name",align:"left",sortable:!1,value:"name"},{text:"Address",align:"left",value:"address"},{text:"Contact Number",align:"left",value:"contactNumber"},{text:"Status",align:"left",value:"status"},{text:"Actions",align:"left",value:"id"}],search:null,input:{churchId:null,firstname:null,lastname:null,middlename:null,address:null,contactNumber:null,email:null,status:null,isOfficer:!1},memberList:[],memberDialog:{show:!1,selected:null},loading:{create:!1}}},methods:{updateMember:function(e){var t=this;return n()(s.a.mark(function r(){return s.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(t.loading.create=!1,t.$refs.createMemberForm.validate()){r.next=3;break}return r.abrupt("return");case 3:return r.prev=3,t.loading.create=!0,r.next=7,c.a.updateMember({userId:e,firstname:t.input.firstname,lastname:t.input.lastname,middlename:t.input.middlename,address:t.input.address,contactNumber:t.input.contactNumber,churchId:t.input.churchId,email:t.input.email,status:t.input.status,memberType:"WORKER",isOfficer:t.input.isOfficer});case 7:t.displayToast("Worker has been updated"),t.loadMemberList(),t.cancelModal(),t.$refs.createMemberForm.reset(),t.loading.create=!1,r.next=18;break;case 14:r.prev=14,r.t0=r.catch(3),t.loading.create=!1,t.displayToast(t.parseErrorRes(r.t0)||"An error occured when trying to update worker. Please try again","error");case 18:case"end":return r.stop()}},r,t,[[3,14]])}))()},cancelModal:function(){this.memberDialog.show=!1,this.input={churchId:null,firstname:null,lastname:null,middlename:null,address:null,contactNumber:null,email:null,status:null,isOfficer:!1},this.memberDialog.selected=null},dateFormat:function(e){return e?o()(e).format(this.timeformat()):""},deleteMember:function(e){var t=this;return n()(s.a.mark(function r(){var a;return s.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:try{a=e.lastname+", "+e.firstname+" "+e.middlename,t.displayToast("Successfully deleted worker - "+a),t.loadMemberList()}catch(e){console.log("e",e),t.displayToast(t.parseErrorRes(e)||"An error occured when trying to delete worker. Please try again","error")}case 1:case"end":return r.stop()}},r,t)}))()},selectMember:function(e){this.input={firstname:e.firstname,lastname:e.lastname,middlename:e.middlename,address:e.address,contactNumber:e.contactNumber,churchId:e.churchId,email:e.email,status:e.status,isOfficer:e.isOfficer},this.memberDialog.selected=e.id,this.memberDialog.show=!0},createMember:function(){var e=this;return n()(s.a.mark(function t(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.loading.create=!1,e.$refs.createMemberForm.validate()){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,e.loading.create=!0,e.input.memberType="WORKER",t.next=8,c.a.createMember(e.input);case 8:e.loadMemberList(),e.displayToast("Successfully added new worker","success"),e.memberDialog.show=!1,e.loading.create=!1,t.next=18;break;case 14:t.prev=14,t.t0=t.catch(3),e.loading.create=!1,e.displayToast(e.parseErrorRes(t.t0)||"An error occured. Please try again","error");case 18:case"end":return t.stop()}},t,e,[[3,14]])}))()},loadMemberList:function(){var e=this;return n()(s.a.mark(function t(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c.a.loadMasterList("WORKER");case 3:e.memberList=t.sent,t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),e.displayToast("An error occured when trying to load your workers List. Please try again","error");case 9:case"end":return t.stop()}},t,e,[[0,6]])}))()}},components:{},mounted:function(){this.loadMemberList()}},d=r("XyMi"),m=Object(d.a)(u,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-layout",{attrs:{row:"row",wrap:"wrap"}},[r("v-flex",{attrs:{xs12:"xs12"}},[r("v-text-field",{staticClass:"mb-2",attrs:{"append-icon":"search",label:"Search","single-line":"single-line","hide-details":"hide-details"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),r("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.memberList,search:e.search,"rows-per-page-items":e.rowPerPageItems},scopedSlots:e._u([{key:"headerCell",fn:function(t){return[r("v-tooltip",{attrs:{bottom:"bottom"}},[r("span",{attrs:{slot:"activator"},slot:"activator"},[e._v(e._s(t.header.text))]),r("span",[e._v(e._s(t.header.text))])])]}},{key:"items",fn:function(t){return[r("tr",{staticClass:"pointer",on:{click:function(r){r.stopPropagation(),e.selectMember(t.item)}}},[r("td",[e._v(e._s(t.item.churchId))]),r("td",[e._v(e._s(t.item.lastname)+", "+e._s(t.item.firstname)+" "+e._s(t.item.middlename))]),r("td",[e._v(e._s(t.item.address))]),r("td",[e._v(e._s(t.item.contactNumber))]),r("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.status))]),r("td",{staticClass:"text-xs-left"},[r("v-btn",{staticClass:"white--text pointer",attrs:{icon:"icon",light:"light",small:"small",color:"red"},nativeOn:{click:function(r){r.stopPropagation(),e.deleteMember(t.item)}}},[r("v-icon",[e._v("mdi-delete")])],1)],1)])]}}])})],1),r("v-dialog",{attrs:{"max-width":"500px",persistent:"persistent"},model:{value:e.memberDialog.show,callback:function(t){e.$set(e.memberDialog,"show",t)},expression:"memberDialog.show"}},[r("v-form",{ref:"createMemberForm"},[r("v-card",[r("v-card-title",{staticClass:"title"},[e._v(e._s(e.memberDialog.selected?"Update Worker":"Add Worker"))]),r("v-card-text",[r("v-layout",{attrs:{row:"row",wrap:"wrap"}},[r("v-flex",{attrs:{xs12:"xs12"}},[r("v-text-field",{attrs:{light:"light","single-line":"single-line","prepend-icon":"mdi-account-box",label:"Church ID",rules:[e.inputRules().required],required:"required"},model:{value:e.input.churchId,callback:function(t){e.$set(e.input,"churchId",t)},expression:"input.churchId"}})],1),r("v-flex",{attrs:{xs12:"xs12"}},[r("v-text-field",{attrs:{light:"light","single-line":"single-line","prepend-icon":"mdi-shape",label:"Last Name",rules:[e.inputRules().required],required:"required"},model:{value:e.input.lastname,callback:function(t){e.$set(e.input,"lastname",t)},expression:"input.lastname"}})],1),r("v-flex",{attrs:{xs12:"xs12"}},[r("v-text-field",{attrs:{light:"light","single-line":"single-line","prepend-icon":"mdi-shape",label:"First Name",rules:[e.inputRules().required],required:"required"},model:{value:e.input.firstname,callback:function(t){e.$set(e.input,"firstname",t)},expression:"input.firstname"}})],1),r("v-flex",{attrs:{xs12:"xs12"}},[r("v-text-field",{attrs:{light:"light","single-line":"single-line","prepend-icon":"mdi-shape",label:"Middle Name"},model:{value:e.input.middlename,callback:function(t){e.$set(e.input,"middlename",t)},expression:"input.middlename"}})],1),r("v-flex",{attrs:{xs12:"xs12"}},[r("v-text-field",{attrs:{light:"light",required:"required","single-line":"single-line","prepend-icon":"mdi-map-marker",label:"Address",rules:[e.inputRules().required]},model:{value:e.input.address,callback:function(t){e.$set(e.input,"address",t)},expression:"input.address"}})],1),r("v-flex",{attrs:{xs12:"xs12"}},[r("v-text-field",{attrs:{light:"light",required:"required","single-line":"single-line","prepend-icon":"mdi-phone",label:"Contact Number",rules:[e.inputRules().required]},model:{value:e.input.contactNumber,callback:function(t){e.$set(e.input,"contactNumber",t)},expression:"input.contactNumber"}})],1),r("v-flex",{attrs:{xs12:"xs12"}},[r("v-text-field",{attrs:{light:"light",required:"required","single-line":"single-line","prepend-icon":"mdi-email",label:"Email Address",rules:[e.inputRules().required]},model:{value:e.input.email,callback:function(t){e.$set(e.input,"email",t)},expression:"input.email"}})],1),r("v-flex",{attrs:{xs12:"xs12"}},[r("v-select",{attrs:{items:["ACTIVE","INACTIVE","RFA","UNKNOWN","OUT OF COUNTRY","CANNOT BE LOC"],label:"Status",rules:[e.inputRules().required],required:"required","prepend-icon":"mdi-battery"},model:{value:e.input.status,callback:function(t){e.$set(e.input,"status",t)},expression:"input.status"}})],1)],1)],1),r("v-card-actions",{staticClass:"display-flex justify-end"},[r("v-btn",{attrs:{color:"red",flat:"flat",disabled:e.loading.create},on:{click:function(t){t.stopPropagation(),e.cancelModal(t)}}},[e._v("Close")]),e.memberDialog.selected?e._e():r("v-btn",{attrs:{medium:"medium",color:"primary",loading:e.loading.create},on:{click:function(t){t.stopPropagation(),e.createMember(t)}}},[e._v("Add Worker")]),e.memberDialog.selected?r("v-btn",{attrs:{medium:"medium",color:"primary",loading:e.loading.create},on:{click:function(t){t.stopPropagation(),e.updateMember(e.memberDialog.selected)}}},[e._v("Update Worker")]):e._e()],1)],1)],1)],1),r("v-btn",{attrs:{fab:"fab",bottom:"bottom",left:"left",color:"green",dark:"dark",fixed:"fixed"},on:{click:function(t){t.stopPropagation(),e.memberDialog.show=!0}}},[r("v-icon",[e._v("add")])],1)],1)},[],!1,null,null,null);t.default=m.exports}});
//# sourceMappingURL=6.56b9290dee5bb2799991.js.map