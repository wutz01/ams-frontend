webpackJsonp([5],{"+sRs":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("Xxa5"),o=a.n(r),s=a("exGp"),i=a.n(s),n=a("PJh5"),c=a.n(n),l=a("gyMJ"),d={name:"product-category",data:function(){return{rowPerPageItems:[15,25,50,{text:"All",value:-1}],headers:[{text:"ID",align:"left",sortable:!0,value:"id"},{text:"Category Name",align:"left",sortable:!0,value:"name"},{text:"Description",align:"left",value:"description"},{text:"Status",align:"left",value:"status"},{text:"Created",align:"left",value:"created_at"},{text:"Actions",align:"left",value:"id"}],search:null,input:{categoryName:null,categoryDescription:null},categoryList:[],categoryDialog:{show:!1,selected:null},loading:{create:!1}}},methods:{updateCategory:function(e){var t=this;return i()(o.a.mark(function a(){return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(t.loading.create=!1,t.$refs.createCategoryForm.validate()){a.next=3;break}return a.abrupt("return");case 3:return a.prev=3,t.loading.create=!0,a.next=7,l.a.updateCategory({catId:e,name:t.input.categoryName,description:t.input.categoryDescription});case 7:t.displayToast("Category has been updated"),t.loadCategoryList(),t.cancelModal(),t.$refs.createCategoryForm.reset(),t.loading.create=!1,a.next=18;break;case 14:a.prev=14,a.t0=a.catch(3),t.loading.create=!1,t.displayToast(t.parseErrorRes(a.t0)||"An error occured when trying to update category. Please try again","error");case 18:case"end":return a.stop()}},a,t,[[3,14]])}))()},cancelModal:function(){this.categoryDialog.show=!1,this.input={categoryName:null,categoryDescription:null},this.categoryDialog.selected=null},dateFormat:function(e){return e?c()(e).format(this.timeformat()):""},deleteCategory:function(e){var t=this;return i()(o.a.mark(function a(){return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,l.a.updateCategory({catId:e.id,name:e.name,description:e.description,status:"inactive"});case 3:t.displayToast("Successfully deleted Category - "+e.name),t.loadCategoryList(),a.next=11;break;case 7:a.prev=7,a.t0=a.catch(0),console.log("e",a.t0),t.displayToast(t.parseErrorRes(a.t0)||"An error occured when trying to delete category. Please try again","error");case 11:case"end":return a.stop()}},a,t,[[0,7]])}))()},selectCategory:function(e){this.input={categoryName:e.name,categoryDescription:e.description},this.categoryDialog.selected=e.id,this.categoryDialog.show=!0},createCategory:function(){var e=this;return i()(o.a.mark(function t(){var a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.loading.create=!1,e.$refs.createCategoryForm.validate()){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,e.loading.create=!0,a={name:e.input.categoryName,description:e.input.categoryDescription},t.next=8,l.a.createCategory(a);case 8:e.loadCategoryList(),e.displayToast("Successfully added new category","success"),e.categoryDialog.show=!1,e.loading.create=!1,e.$refs.createCategoryForm.reset(),t.next=20;break;case 15:t.prev=15,t.t0=t.catch(3),console.log("ee",t.t0),e.loading.create=!1,e.displayToast(e.parseErrorRes(t.t0)||"An error occured. Please try again","error");case 20:case"end":return t.stop()}},t,e,[[3,15]])}))()},loadCategoryList:function(){var e=this;return i()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l.a.loadCategoryList("active");case 3:e.categoryList=t.sent,t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),e.displayToast("An error occured when trying to load your category List. Please try again","error");case 9:case"end":return t.stop()}},t,e,[[0,6]])}))()}},components:{},mounted:function(){this.loadCategoryList()}},g=a("XyMi"),u=Object(g.a)(d,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-layout",{attrs:{row:"row",wrap:"wrap"}},[a("v-flex",{attrs:{xs12:"xs12"}},[a("v-text-field",{staticClass:"mb-2",attrs:{"append-icon":"search",label:"Search","single-line":"single-line","hide-details":"hide-details"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.categoryList,search:e.search,"rows-per-page-items":e.rowPerPageItems},scopedSlots:e._u([{key:"headerCell",fn:function(t){return[a("v-tooltip",{attrs:{bottom:"bottom"}},[a("span",{attrs:{slot:"activator"},slot:"activator"},[e._v(e._s(t.header.text))]),a("span",[e._v(e._s(t.header.text))])])]}},{key:"items",fn:function(t){return[a("tr",{staticClass:"pointer",on:{click:function(a){a.stopPropagation(),e.selectCategory(t.item)}}},[a("td",[e._v(e._s(t.item.id))]),a("td",[e._v(e._s(t.item.name))]),a("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.description))]),a("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.status))]),a("td",{staticClass:"text-xs-left"},[e._v(e._s(e.dateFormat(t.item.created_at)))]),a("td",{staticClass:"text-xs-left"},[a("v-btn",{staticClass:"white--text",attrs:{light:"light",small:"small",color:"red"},nativeOn:{click:function(a){a.stopPropagation(),e.deleteCategory(t.item)}}},[e._v("Delete")])],1)])]}}])})],1),a("v-dialog",{attrs:{"max-width":"500px",persistent:"persistent"},model:{value:e.categoryDialog.show,callback:function(t){e.$set(e.categoryDialog,"show",t)},expression:"categoryDialog.show"}},[a("v-form",{ref:"createCategoryForm"},[a("v-card",[a("v-card-title",{staticClass:"title"},[e._v(e._s(e.categoryDialog.selected?"Update Category":"Add Category"))]),a("v-card-text",[a("v-layout",{attrs:{row:"row",wrap:"wrap"}},[a("v-flex",{attrs:{xs12:"xs12"}},[a("v-text-field",{attrs:{light:"light","single-line":"single-line","prepend-icon":"mdi-shape",label:"Category Name",rules:[e.inputRules().required],required:"required"},model:{value:e.input.categoryName,callback:function(t){e.$set(e.input,"categoryName",t)},expression:"input.categoryName"}})],1),a("v-flex",{attrs:{xs12:"xs12"}}),a("v-text-field",{attrs:{light:"light",textarea:"textarea",required:"required",label:"Description"},model:{value:e.input.categoryDescription,callback:function(t){e.$set(e.input,"categoryDescription",t)},expression:"input.categoryDescription"}})],1)],1),a("v-card-actions",{staticClass:"display-flex justify-end"},[a("v-btn",{attrs:{color:"red",flat:"flat",disabled:e.loading.create},on:{click:function(t){t.stopPropagation(),e.categoryDialog.show=!1}}},[e._v("Close")]),e.categoryDialog.selected?e._e():a("v-btn",{attrs:{medium:"medium",color:"primary",loading:e.loading.create},on:{click:function(t){t.stopPropagation(),e.createCategory(t)}}},[e._v("Add Category")]),e.categoryDialog.selected?a("v-btn",{attrs:{medium:"medium",color:"primary",loading:e.loading.create},on:{click:function(t){t.stopPropagation(),e.updateCategory(e.categoryDialog.selected)}}},[e._v("Update Category")]):e._e()],1)],1)],1)],1),a("v-btn",{attrs:{fab:"fab",bottom:"bottom",right:"right",color:"green",dark:"dark",fixed:"fixed"},on:{click:function(t){t.stopPropagation(),e.categoryDialog.show=!0}}},[a("v-icon",[e._v("add")])],1)],1)},[],!1,null,null,null);t.default=u.exports}});
//# sourceMappingURL=5.9bfa36455371d867e615.js.map